{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Maps sandbox</title>
  <script src="https://maps.googleapis.com/maps/api/js?key={{g_api_key}}&libraries=places&callback=initMap"></script>
  <script>
    let user_place;
    console.log('keith is here')
    function initAutocomplete() {
      autocomplete = new google.maps.places.Autocomplete(
        document.getElementById('autocomplete'), 
        {
          componentRestrictions: { country: "us" },
          fields: ["address_components", "name"],
          types: ["address"],
        }
      )
      console.log(autocomplete, 'autocomplete ** stuff **')
      address_complete(autocomplete);
    }
function address_complete(user_place){
  console.log(user_place.address_components)
  //   for (const component of user_place.address_components) {
  //   // @ts-ignore remove once typings fixed
  //   const componentType = component.types[0];

  //   switch (componentType) {
  //     case "street_number": {
  //       address = `${component.long_name} ${address1}`;
  //       break;
  //     }

  //     case "route": {
  //       address1 += component.short_name;
  //       break;
  //     }

  //     case "postal_code": {
  //       postcode = `${component.long_name}${postcode}`;
  //       break;
  //     }

  //     case "postal_code_suffix": {
  //       postcode2 = `${postcode}-${component.long_name}`;
  //       break;
  //     }
  //     case "locality":
  //       document.querySelector("#locality").value = component.long_name;
  //       break;
  //     case "administrative_area_level_1": {
  //       document.querySelector("#state").value = component.short_name;
  //       break;
  //     }
  //     case "country":
  //       document.querySelector("#country").value = component.long_name;
  //       break;
  //   }
  //   console.log(postcode, postcode2, address1, address, 'autocomplete?')
  // }
}

    google.maps.event.addDomListener(window, 'load', initAutocomplete);
  </script>
</head>
<body>
  
<h1>Gmaps Rendezvous Sandbox</h1>
<input id="autocomplete" placeholder="Enter your location" type="text" />
<input id="locality" type="text" placeholder="locality"/>
<input id="state" type="text" placeholder="state"/>
<input id="country" type="text" placeholder="country"/>
</body>
</html>

